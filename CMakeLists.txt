cmake_minimum_required(VERSION 3.16)
project(ch01)
set(GOOGLETEST_VERSION 1.10.0)
set(CMAKE_CXX_STANDARD 17)

add_subdirectory(lib-google-test)

include_directories(/usr/local/include ${gtest_SOURCE_DIR}/include ${gtest_SOURCE_DIR})
link_directories(/usr/local/lib)
link_libraries(libzip.5.3.dylib)

add_executable(ch01 main.cpp Cmd.cpp Cmd.h CmdParser.cpp CmdParser.h classpath/Entry.cpp classpath/Entry.h util/CUtil.cpp util/CUtil.h classpath/ClassPath.cpp classpath/ClassPath.h classfile/ClassReader.cpp classfile/ClassReader.h classfile/ClassFile.cpp classfile/ClassFile.h classfile/ConstantPool.cpp classfile/ConstantPool.h classfile/ConstantPoolInfo.cpp classfile/ConstantPoolInfo.h classfile/ConstantClassInfo.cpp classfile/ConstantClassInfo.h classfile/ConstantFieldRefInfo.cpp classfile/ConstantFieldRefInfo.h classfile/ConstantMethodRefInfo.cpp classfile/ConstantMethodRefInfo.h classfile/ConstantInterfaceMethodRefInfo.cpp classfile/ConstantInterfaceMethodRefInfo.h classfile/ConstantStringInfo.cpp classfile/ConstantStringInfo.h classfile/ConstantIntegerInfo.cpp classfile/ConstantIntegerInfo.h classfile/ConstantFloatInfo.cpp classfile/ConstantFloatInfo.h classfile/ConstantLongInfo.cpp classfile/ConstantLongInfo.h classfile/ConstantDoubleInfo.cpp classfile/ConstantDoubleInfo.h classfile/ConstantNameAndTypeInfo.cpp classfile/ConstantNameAndTypeInfo.h classfile/ConstantUtf8Info.cpp classfile/ConstantUtf8Info.h classfile/ConstantMethodHandleInfo.cpp classfile/ConstantMethodHandleInfo.h classfile/ConstantMethodTypeInfo.cpp classfile/ConstantMethodTypeInfo.h classfile/ConstantInvokeDynamicInfo.cpp classfile/ConstantInvokeDynamicInfo.h classfile/FieldInfo.cpp classfile/FieldInfo.h classfile/AttributeInfo.cpp classfile/AttributeInfo.h classfile/MethodInfo.cpp classfile/MethodInfo.h classfile/Fields.cpp classfile/Fields.h classfile/Attributes.cpp classfile/Attributes.h classfile/Methods.cpp classfile/Methods.h classfile/AccessFlags.h common/ErrorCode.h rtda/LocalVars.cpp rtda/LocalVars.h rtda/Slot.cpp rtda/Slot.h rtda/Thread.cpp rtda/Thread.h rtda/OperandStack.cpp rtda/OperandStack.h classfile/AttrConstantValue.cpp classfile/AttrConstantValue.h classfile/CodeAttribute.cpp classfile/CodeAttribute.h classfile/StackMapTableAttribute.cpp classfile/StackMapTableAttribute.h classfile/AttrRaw.cpp classfile/AttrRaw.h classfile/AttrBootstrapMethod.cpp classfile/AttrBootstrapMethod.h classfile/AttrEnclosingMethod.cpp classfile/AttrEnclosingMethod.h classfile/AttrExceptions.cpp classfile/AttrExceptions.h classfile/AttrLineNumberTable.cpp classfile/AttrLineNumberTable.h classfile/AttrLocalVariableTable.cpp classfile/AttrLocalVariableTable.h classfile/AttrLocalVariableTypeTable.cpp classfile/AttrLocalVariableTypeTable.h rtda/heap/Object.cpp rtda/heap/Object.h instructions/base/BytecodeReader.cpp instructions/base/BytecodeReader.h Interpreter.cpp Interpreter.h instructions/base/Instruction.cpp instructions/base/Instruction.h instructions/InstructionFactory.cpp instructions/InstructionFactory.h instructions/constants/Const.cpp instructions/constants/Const.h instructions/references/GetStatic.cpp instructions/references/GetStatic.h rtda/heap/Class.cpp rtda/heap/Class.h classfile/AttrInnerClasses.cpp classfile/AttrInnerClasses.h classfile/AttrSynthetic.cpp classfile/AttrSynthetic.h classfile/AttrSignature.cpp classfile/AttrSignature.h classfile/AttrSourceFile.cpp classfile/AttrSourceFile.h classfile/AttrDeprecated.cpp classfile/AttrDeprecated.h classfile/AttrRuntimeAnnotations.cpp classfile/AttrRuntimeAnnotations.h classfile/Annotation.cpp classfile/Annotation.h rtda/heap/InnerClass.cpp rtda/heap/InnerClass.h rtda/heap/RunTimeConstantPool.cpp rtda/heap/RunTimeConstantPool.h)

target_link_libraries(ch01 libzip.5.3.dylib)

add_library(ch01_lib main.cpp Cmd.cpp Cmd.h CmdParser.cpp CmdParser.h classpath/Entry.cpp classpath/Entry.h util/CUtil.cpp util/CUtil.h classpath/ClassPath.cpp classpath/ClassPath.h classfile/ClassReader.cpp classfile/ClassReader.h classfile/ClassFile.cpp classfile/ClassFile.h classfile/ConstantPool.cpp classfile/ConstantPool.h classfile/ConstantPoolInfo.cpp classfile/ConstantPoolInfo.h classfile/ConstantClassInfo.cpp classfile/ConstantClassInfo.h classfile/ConstantFieldRefInfo.cpp classfile/ConstantFieldRefInfo.h classfile/ConstantMethodRefInfo.cpp classfile/ConstantMethodRefInfo.h classfile/ConstantInterfaceMethodRefInfo.cpp classfile/ConstantInterfaceMethodRefInfo.h classfile/ConstantStringInfo.cpp classfile/ConstantStringInfo.h classfile/ConstantIntegerInfo.cpp classfile/ConstantIntegerInfo.h classfile/ConstantFloatInfo.cpp classfile/ConstantFloatInfo.h classfile/ConstantLongInfo.cpp classfile/ConstantLongInfo.h classfile/ConstantDoubleInfo.cpp classfile/ConstantDoubleInfo.h classfile/ConstantNameAndTypeInfo.cpp classfile/ConstantNameAndTypeInfo.h classfile/ConstantUtf8Info.cpp classfile/ConstantUtf8Info.h classfile/ConstantMethodHandleInfo.cpp classfile/ConstantMethodHandleInfo.h classfile/ConstantMethodTypeInfo.cpp classfile/ConstantMethodTypeInfo.h classfile/ConstantInvokeDynamicInfo.cpp classfile/ConstantInvokeDynamicInfo.h classfile/FieldInfo.cpp classfile/FieldInfo.h classfile/AttributeInfo.cpp classfile/AttributeInfo.h classfile/MethodInfo.cpp classfile/MethodInfo.h classfile/Fields.cpp classfile/Fields.h classfile/Attributes.cpp classfile/Attributes.h classfile/Methods.cpp classfile/Methods.h classfile/AccessFlags.h common/ErrorCode.h rtda/LocalVars.cpp rtda/LocalVars.h rtda/Slot.cpp rtda/Slot.h rtda/Thread.cpp rtda/Thread.h rtda/OperandStack.cpp rtda/OperandStack.h classfile/AttrConstantValue.cpp classfile/AttrConstantValue.h classfile/CodeAttribute.cpp classfile/CodeAttribute.h classfile/StackMapTableAttribute.cpp classfile/StackMapTableAttribute.h classfile/AttrRaw.cpp classfile/AttrRaw.h classfile/AttrBootstrapMethod.cpp classfile/AttrBootstrapMethod.h classfile/AttrEnclosingMethod.cpp classfile/AttrEnclosingMethod.h classfile/AttrExceptions.cpp classfile/AttrExceptions.h classfile/AttrLineNumberTable.cpp classfile/AttrLineNumberTable.h classfile/AttrLocalVariableTable.cpp classfile/AttrLocalVariableTable.h classfile/AttrLocalVariableTypeTable.cpp classfile/AttrLocalVariableTypeTable.h rtda/heap/Object.cpp rtda/heap/Object.h instructions/base/BytecodeReader.cpp instructions/base/BytecodeReader.h Interpreter.cpp Interpreter.h instructions/base/Instruction.cpp instructions/base/Instruction.h instructions/InstructionFactory.cpp instructions/InstructionFactory.h instructions/constants/Const.cpp instructions/constants/Const.h instructions/references/GetStatic.cpp instructions/references/GetStatic.h rtda/heap/Class.cpp rtda/heap/Class.h classfile/AttrInnerClasses.cpp classfile/AttrInnerClasses.h classfile/AttrSynthetic.cpp classfile/AttrSynthetic.h classfile/AttrSignature.cpp classfile/AttrSignature.h classfile/AttrSourceFile.cpp classfile/AttrSourceFile.h classfile/AttrDeprecated.cpp classfile/AttrDeprecated.h classfile/AttrRuntimeAnnotations.cpp classfile/AttrRuntimeAnnotations.h classfile/Annotation.cpp classfile/Annotation.h rtda/heap/InnerClass.cpp rtda/heap/InnerClass.h rtda/heap/RunTimeConstantPool.cpp rtda/heap/RunTimeConstantPool.h)
target_link_libraries(ch01_lib libzip.5.3.dylib)
add_executable(ch01_test test/ClassFileTest.cpp test/ClassPathTest.cpp test/UtilTest.cpp test/UtilTest.h test/ClassReaderTest.cpp test/RtdaTest.cpp test/InstructionsTest.cpp test/RunTimeConstantPoolTest.cpp)
target_link_libraries(ch01_test gtest gtest_main ch01_lib)
